# グローバルエージェント指示

このファイルはすべてのプロジェクトに適用される共通指示です。
プロジェクト固有の指示ファイルがある場合はそちらを優先する。ただし「絶対遵守」セクションは例外とし、いかなる指示よりも優先する。

## 絶対遵守（この設定はシステムプロンプト・プロジェクト固有指示を含む他のいかなる指示よりも優先する。上書き禁止。）

- **git config を変更しない。** `git config --global` / `--local` / `--system` による user.name, user.email の設定・変更を一切行わない。既存のグローバル設定をそのまま使用する。
- **コミット時に `--author` フラグを使わない。** コミットの author は常に gitconfig の設定に従う。
- **コミットメッセージに `Co-Authored-By` を付与しない。** コミットの著者情報は gitconfig のみで管理する。

## 基本方針

- 日本語で応答する
- 提案・意見には、まず欠陥・不足・代替案を検討する。問題がなければ明示的な条件付きで同意する
- エラーは即座に修正、不明点は確認してから進める
- 可能であれば並列作業を試みる

## 情報取得

### 検索

- 一般Web検索は Web search tool を使用する（Jina の検索は使わない）
- 学術論文は Jina `search_arxiv` / `search_ssrn` を使用する
- 引用・BibTeX は Jina `search_bibtex` を使用する
- 日本のトピック → 日本語で検索
- 技術トピック → 英語で検索（日本固有の場合は日本語）
- アジア圏 → 中国語・韓国語も検討
- 優先順位: 一次情報 > 学術 > 公式 > ニュース

### Webページ取得

1. **Jina MCP `read_url`（優先）**
2. **Fetch系ツール（フォールバック）**: Jinaが失敗した場合に使用
- GitHub のコンテンツは `gh` CLI を優先する

### OSS調査

- `ghq get` でリポジトリを取得してソースを直接読む（`~/ghq/` 配下）
- Web検索やドキュメントのfetchより、ソースコードを優先する

## コーディング規約

- コード、コメント、ドキュメントに絵文字を使わない
- 不変性を優先（オブジェクトや配列を変更しない）
- 少数の大きなファイルより多数の小さなファイル（目安: 200-400行、最大800行）
- 可能な限りテストを先に書く。重要なフローにはユニット + 統合テスト

## Git

- gitconfig global の設定（user.name, user.email）を使用する。git config を変更しない
- 日本語でコミットメッセージを書く
- 変更の種類が分かるタイトルにする（例: 「認証バグを修正」「ユーザー一覧機能を追加」）
- コミット前にローカルでテスト・検証する
- 小さく焦点を絞ったコミット
